<?xml version="1.0" encoding="UTF-8"?>
<tns:ensemble name="RouteA" xmlns:tns="http://das.fbk.eu/Ensemble"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://das.fbk.eu/Ensemble Ensemble.xsd ">
	<!-- ROUTE MANAGER RMA -->


	<tns:role id="RouteManagement_1" type="RouteManagement_1">
		<tns:domainObjectType>tns:domainObjectType</tns:domainObjectType>

		<!--Solve HighTraffic Issue generated by the Driver with ReRoute for the 
			bus and Exit for the passenger -->
		<tns:solver name="ExitRouteAndDropPP" selected="true">
			<tns:issue>
				<tns:issueType>ManageIntenseTraffic</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL1">
				<tns:internalSolution>Nothing</tns:internalSolution>
				<tns:issue>
					<!-- communicate to the Driver to change the route path dropping a PP -->
					<tns:issueType>ChangePathDropPP</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
				<tns:issue>
					<!-- communicate to Passenger to plan alone exiting the ensemble -->
					<tns:issueType>ExitAndRePlan</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
			</tns:solution>
		</tns:solver>
	
		
		
		<tns:solver name="UseCarAndDropPP" selected="true">
			<tns:issue>
				<tns:issueType>ManageIntenseTraffic</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL2">
				<tns:internalSolution>Nothing</tns:internalSolution>
				<tns:issue>
					<!-- communicate to the Driver to change the route path dropping a PP -->
					<tns:issueType>ChangePathDropPP</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
				<tns:issue>
					<!-- communicate to Passenger to plan alone exiting the ensemble -->
					<tns:issueType>ExitAndRePlanCar</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
			</tns:solution>
		</tns:solver>
		
				
		<tns:solver name="WalkAndDropPP" selected="true">
			<tns:issue>
				<tns:issueType>ManageIntenseTraffic</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL3">
				<tns:internalSolution>Nothing</tns:internalSolution>
				<tns:issue>
					<!-- communicate to the Driver to change the route path dropping a PP -->
					<tns:issueType>ChangePathDropPP</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
				<tns:issue>
					<!-- communicate to Passenger to plan alone exiting the ensemble -->
					<tns:issueType>ExitAndRePlanWalk</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
			</tns:solution>
		</tns:solver>
		
		
		<tns:solver name="CloseEnsemble" selected="true">
			<tns:issue>
				<tns:issueType>ManageIntenseTraffic</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL4">
				<tns:internalSolution>Nothing</tns:internalSolution>
				<tns:issue>
					<!-- communicate to Driver to come back Home -->
					<tns:issueType>ComeBackDeposit</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
				<tns:issue>
					<!-- communicate to Passenger to plan alone exiting the ensemble -->
					<tns:issueType>ExitAndChangeP1</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
				<tns:issue>
					<!-- communicate to Passenger to plan alone exiting the ensemble -->
					<tns:issueType>ExitAndChangeP2</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
				<tns:issue>
					<!-- communicate to Passenger to plan alone exiting the ensemble -->
					<tns:issueType>ExitAndChangeP3</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
			</tns:solution>
		</tns:solver>
		
		
		
		<!--Solve HighTraffic Issue generated by the Driver with ReRoute for the 
			bus and change PP for the passenger-->
		<tns:solver name="ChangePathAddPP" selected="true">
			<tns:issue>
				<tns:issueType>ManageIntenseTraffic</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL5">
				<tns:internalSolution>Nothing</tns:internalSolution>
				<tns:issue>
					<!-- communicate to the Driver to change the route path dropping a PP -->
					<tns:issueType>ChangePathAddPP</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
				<tns:issue>
					<!-- communicate to Passenger to plan alone exiting the ensemble -->
					<tns:issueType>StayAndRePlan</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
			</tns:solution>
		</tns:solver>
		
		<!-- solver able to take passengers from another route -->	
	<tns:solver name="TakeExtraPassenger" selected="true">
				<tns:issue>
				<tns:issueType>AllocatePassengersRouteA</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL6">
				<tns:internalSolution>Nothing</tns:internalSolution>
				<tns:issue>
					<!-- communicate to the Driver to add another passenger to a PP -->
					<tns:issueType>AddExtraPassenger</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
			</tns:solution>
		</tns:solver>
		
		
		<!--Solve HighTraffic Issue generated by the Driver with ReRoute for the 
			bus (dropping a PP) and Exit for the passenger and Enter in Route B Ensemble
	   <tns:solver name="AssignToOtherRoute" selected="true">
			<tns:issue>
				<tns:issueType>ManageIntenseTraffic</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL6">
				<tns:internalSolution>Nothing</tns:internalSolution>
				<tns:issue>
					
					<tns:issueType>ChangePathDropPP</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
				<tns:issue>			
					<tns:issueType>AssignPassengerP3</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
			</tns:solution>
		</tns:solver>-->
	
 	
	</tns:role>

	<!-- DRIVER DRIVER A -->
	<tns:role id="FlexibusDriver_13" type="FlexibusDriver_13">
		<tns:domainObjectType>tns:domainObjectType</tns:domainObjectType>

		<!--Communicate intense traffic -->
		<tns:solver name="ReRoute" selected="true">
			<tns:issue>
				<tns:issueType>IntenseTraffic</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL1">
				<tns:internalSolution>Nothing</tns:internalSolution>
				<tns:issue>
					<!-- communicate to the Driver to change the route path -->
					<tns:issueType>ManageIntenseTraffic</tns:issueType>
					<tns:issueCondition>Exist</tns:issueCondition>
				</tns:issue>
			</tns:solution>
		</tns:solver>

		<!--Change  Route Plan Adding PP -->
		<tns:solver name="ChangeRouteAddPP" selected="true">
			<tns:issue>
				<tns:issueType>ChangePathAddPP</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL2">
				<tns:internalSolution>ChangePathAddPP</tns:internalSolution>
			</tns:solution>
		</tns:solver>
		
		<!--Change  Route Removing PP -->
	<tns:solver name="ChangeRouteDropPP" selected="true">
			<tns:issue>
				<tns:issueType>ChangePathDropPP</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL3">
				<tns:internalSolution>ChangePathDropPP</tns:internalSolution>
			</tns:solution>
		</tns:solver>
		
			
		<!--ADD Extra Passenger of Another Route -->
	<tns:solver name="AddExtraPassenger" selected="true">
			<tns:issue>
				<tns:issueType>AddExtraPassenger</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL4">
				<tns:internalSolution>AddExtraPassenger</tns:internalSolution>
			</tns:solution>
		</tns:solver>
		
		<!-- come back at the deposit -->
			<tns:solver name="ComeBackDeposit" selected="true">
			<tns:issue>
				<tns:issueType>ComeBackDeposit</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution name="SOL5">
				<tns:internalSolution>ComeBackDeposit</tns:internalSolution>
			</tns:solution>
		</tns:solver>
		
		
	

	</tns:role>

	<!-- PASSENGER P1 -->
	<tns:role id="RoutePassenger_33" type="RoutePassenger_33">
		<tns:domainObjectType>tns:domainObjectType</tns:domainObjectType>

			
	<!--P1 Exit and Change-->
		<tns:solver name="ExitAndChange" selected="true">
			<tns:issue>
				<tns:issueType>ExitAndChangeP1</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution cost="3" name="sol" time="35">
				<tns:internalSolution>ExitAndChange</tns:internalSolution>
			</tns:solution>
		</tns:solver>	 
	</tns:role>

	<!-- PASSENGER P2 -->
	<tns:role id="RoutePassenger_30" type="RoutePassenger_30">
		<tns:domainObjectType>tns:domainObjectType</tns:domainObjectType>
		
	<!--P2 Exit and Change-->
		<tns:solver name="ExitAndChange" selected="true">
			<tns:issue>
				<tns:issueType>ExitAndChangeP2</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution cost="10" name="sol" time="20">
				<tns:internalSolution>ExitAndChange</tns:internalSolution>
			</tns:solution>
		</tns:solver>	
		
		
		
	</tns:role>


	<!-- PASSENGER P3 -->
	<tns:role id="USER_3" type="RoutePassenger_36">
		<tns:domainObjectType>tns:domainObjectType</tns:domainObjectType>

		<!--ExitAndRePlan Trip Alone (Exit From Ensemble and plan) -->
	   <tns:solver name="ExitAndRePlan" selected="true">
			<tns:issue>
				<tns:issueType>ExitAndRePlan</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution cost="3" name="sol" time="10">
				<tns:internalSolution>ExitAndRePlan</tns:internalSolution>
			</tns:solution>
		</tns:solver>
		
			<!--StayAndRePlanRemain in the Ensemble and change PP -->
	      <tns:solver name="StayAndRePlan" selected="true">
			<tns:issue>
				<tns:issueType>StayAndRePlan</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution cost="3" name="sol" time="10">
				<tns:internalSolution>StayAndRePlan</tns:internalSolution>
			</tns:solution>
		</tns:solver>
		
		<!--P3 go directly by car-->
		<tns:solver name="ExitAndRePlanCar" selected="true">
			<tns:issue>
				<tns:issueType>ExitAndRePlanCar</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution cost="3" name="sol" time="10">
				<tns:internalSolution>ExitAndRePlanCar</tns:internalSolution>
			</tns:solution>
		</tns:solver>
		
		<!--P3 go directly by walk-->
		<tns:solver name="ExitAndRePlanWalk" selected="true">
			<tns:issue>
				<tns:issueType>ExitAndRePlanWalk</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution cost="3" name="sol" time="10">
				<tns:internalSolution>ExitAndRePlanWalk</tns:internalSolution>
			</tns:solution>
		</tns:solver>
		
		
		<!--P3 Exit and Change-->
		<tns:solver name="ExitAndChange" selected="true">
			<tns:issue>
				<tns:issueType>ExitAndChangeP3</tns:issueType>
				<tns:issueCondition></tns:issueCondition>
			</tns:issue>
			<tns:solverCondition></tns:solverCondition>
			<tns:solution cost="3" name="sol" time="10">
				<tns:internalSolution>ExitAndChange</tns:internalSolution>
			</tns:solution>
		</tns:solver>
				
		
	</tns:role>


	<tns:variable>NMTOKEN</tns:variable>
</tns:ensemble>
